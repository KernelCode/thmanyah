# المستند التقني

هذا المستند يشرح التقنيات التي اخترتها وأسباب اختياري لها:

## التقنيات المستخدمة

- **Next.js**: اخترتها لدعمها السيرفر سايد رندرنج (Server-Side Rendering)، مما يسهم في تحسين أداء التطبيق وتجربة المستخدم.
- **Prisma**: أداة تسهل التواصل مع قواعد البيانات، حيث تسهم في كتابة أوامر الربط وجلب البيانات بشكل أكثر فعالية.
- **Zustand**: استخدمتها لإدارة حالة المشغل الصوتي في جميع الصفحات.

## تفاصيل التنفيذ

### البحث

تم بناء البحث بحيث يدعم السيرفر سايد رندرنج عبر إنشاء صفحة تقوم بجلب بيانات البحث قبل إرسال الصفحة باستخدام Next.js.

### قاعدة البيانات

- قمت بعمل قاعدة بيانات لتخزين القيم الراجعه من البحث، حيث تحتوي على جدول واحد فقط.

### التخزين المؤقت (Caching)

تم تطبيق ثلاث طبقات من التخزين المؤقت لتحسين الأداء:

1. **قاعدة البيانات**: يتم تخزين البيانات لمدة 24 ساعة.
2. **الطلبات من الباك إند**: يتم تخزين الردود لمدة 24 ساعة.
3. **التخزين المؤقت في Next.js**: يتم تخزين كل صفحة لمدة ساعة واحدة.

## كيفية البناء والتشغيل

### المتطلبات

1. تأكد من تثبيت Node.js وnpm على جهازك.
2. قم بتثبيت قاعدة بيانات PostgreSQL وقم بإنشاء قاعدة بيانات جديدة.

### الإعداد

1. قم بإنشاء ملف `.env` في جذر المشروع وأضف الرابط الخاص بقاعدة البيانات:

   ```env
   DATABASE_URL=postgresql://username:password@localhost:5432/database_name
   ```

2. قم بتثبيت الحزم المطلوبة:

   ```bash
   npm install
   ```

3. قم بتهيئة قاعدة البيانات باستخدام Prisma:

   ```bash
   npx prisma migrate dev --name init
   ```

   هذا الأمر سيقوم بإنشاء الجداول المطلوبة في قاعدة البيانات.

4. قم بتشغيل التطبيق:

   ```bash
   npm run dev
   ```

   سيتم تشغيل التطبيق على `http://localhost:3000`.

### ملاحظات هامة

- تأكد من أن قاعدة البيانات تعمل بشكل صحيح قبل تشغيل التطبيق.
- إذا قمت بتغيير هيكل قاعدة البيانات، قم بتحديث Prisma باستخدام:

  ```bash
  npx prisma migrate dev --name migration_name
  ```

## المشاكل والتحديات

### التخزين المؤقت

عند إضافة حلقة جديدة، قد لا تظهر مباشرة بسبب الحاجة إلى تحديث الكاش.  
**الحل**: يمكن تحسين عملية التحديث باستخدام آلية لتفريغ الكاش عند إضافة بيانات جديدة.

### البيانات

لا يوجد توثيق واضح يشرح كيفية استخدام الـ API لاستقبال بيانات البودكاست أو الحلقات المرتبطة ببودكاست معين باستخدام معرف (ID) محدد.  
**الحل**: تم الاعتماد على البحث في قاعدة البيانات فقط، مع تحسين الاستعلامات لضمان الأداء وسهولة الوصول إلى البيانات المطلوبة.

## الرخصة

هذا المشروع مفتوح المصدر ومتاح تحت رخصة MIT. يمكنكم الاطلاع على تفاصيل الرخصة في ملف `LICENSE`.

شكرًا لكم!
